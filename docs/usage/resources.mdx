---
title: Resources
---

`blaqkube/mysql-operator` comes with a number of resources to manage your
mysql instances. Resources available are:

- `Instance` defines a MySQL Instance, its attributes and when useful, the
  backup to use as a source to create the instance,
- `Store` defines backup stores
- `Backup` defines a backup request

## Instance

Instances are used to create a stateful set with the `mysql:8.0.20` container
as well as the associated sidecars. This is an example of an Instance manifest:

```yaml
apiVersion: mysql.blaqkube.io/v1alpha1
kind: Instance
metadata:
  name: blue
spec:
  database: blue
  username: me
  password: me
  restore:
    store: docs
    filePath: "/location/backup-20200526110950.sql"
```

The properties are the following:

- `database` calls a database to create at startup
- `username` creates a database user that can access the database
- `password` defines the password for the main user defined with `username`
_ `restore` is used to define the 2 mandatory parameter to base the instance
  on a previous backup:
  - `store` name the Store the backup is located in
  - `filePath` defines the key for the file. It should start with a `/`

## Store

Stores are used to keep backups. For now, only S3 stores are supported. This is
an example of a Store manifest:

```yaml
apiVersion: mysql.blaqkube.io/v1alpha1
kind: Store
metadata:
  name: mybackupstore
spec:
  backend: s3
  s3access:
    awsConfig:
      aws_access_key_id: AKIAXXXXXXXXXXXXXXX
      aws_secret_access_key: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
      region: us-east-1
    bucket: mybucket
    path: /location
```

The properties are the following:

- `backend` defines the backend, for now only s3 is supported
- `s3access` defines the properties for s3
  - `awsConfig` defines some AWS configuration properties. Supported
    properties are:
    - `aws_access_key_id` defines an AWS access key
    - `aws_secret_access_key` defines the associated AWS secret access key
    - `region` defines the region for the s3 bucket
  - `bucket` defines the bucket to store backups
  - `path` defines the prefix used to prefix backups. It should start with
    `/` and ended without any.

## Backup

Backups are used to trigger backups. Below is an example of a Backup manifest:

```yaml
apiVersion: mysql.blaqkube.io/v1alpha1
kind: Backup
metadata:
  name: blue-backup
spec:
  store: docs
  instance: blue
```

The properties are the following:

- `store` defines the store used to perform the backup
- `instance` defines the instance to backup.

